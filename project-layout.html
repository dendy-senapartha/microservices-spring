<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\asciidoc/project-layout.adoc at 2019-02-18 -->
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Microservices &#x2013; </title>
	<link rel="stylesheet" href="./css/bulma.css">
    <style type="text/css" media="all">
      @import url("./css/style.css");
      @import url("./css/site.css");
    </style>
    <meta http-equiv="Content-Language" content="en" />
<link rel="icon" href="./images/mitrais-logo.png">
				<link rel="stylesheet" href="./libs/highlightjs/github.css">
				<link rel="stylesheet" href="./css/mitrais.css">
				<script src="./libs/highlightjs/highlight.pack.js"></script>
				<script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="composite">
  <!-- START BANNER -->
  <nav id="banner" class="navbar has-shadow is-spaced">
	  <div class="container">
	  	  <div class="navbar-brand">
		  	  <a class="navbar-item" href="https://mitrais.github.io/microservice" id="bannerLeft"><h1 class="title is-5">Microservices</h1>
</a>

			  <div class="navbar-burger burger" data-target="navbarMenu">
				<span></span>
				<span></span>
				<span></span>
			  </div>
		  </div>
		  <div class="navbar-menu" id="navbarMenu">
			  <div class="navbar-start is-hidden-desktop">
			  <div class="navbar-item">
       <p class="menu-label">Documentation</p>
    <ul class="menu-list">
<li>
<a href="index.html" title="Overview">Overview</a></li>
<li>
<a class="is-active" href="#">Project Layout</a></li>
<li>
<a href="#" title="Non-Functional">Non-Functional</a>
      <ul class="menu-list">
<li>
<a href="configuration-service.html" title="Configuration Service">Configuration Service</a></li>
<li>
<a href="registry-service.html" title="Registry Service">Registry Service</a></li>
      </ul></li>
<li>
<a href="#" title="Functional">Functional</a>
      <ul class="menu-list">
<li>
<a href="product-service.html" title="Product Service">Product Service</a></li>
<li>
<a href="account-service.html" title="Account Service">Account Service</a></li>
      </ul></li>
<li>
<a href="./tests.html" title="Tests">Tests</a></li>
    </ul>
       <p class="menu-label">Info and reports</p>
    <ul class="menu-list">
<li>
<a href="./project-info.html" title="Info">Info</a></li>
<li>
<a href="./project-reports.html" title="Reports">Reports</a></li>
<li>
<a href="./apidocs/" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <p class="menu-label">Github</p>
    <ul class="menu-list">
<li>
<a href="https://github.com/Mitrais/microservices" class="externalLink" title="SCM">SCM</a></li>
<li>
<a href="https://github.com/Mitrais/microservices/issues" class="externalLink" title="Issues">Issues</a></li>
    </ul>
       <p class="menu-label">Mitrais</p>
    <ul class="menu-list">
<li>
<a href="https://www.mitrais.com" class="externalLink" title="Website">Website</a></li>
<li>
<a href="https://github.com/Mitrais" class="externalLink" title="Github">Github</a></li>
    </ul>
       <p class="menu-label">Icons</p>
    <ul class="menu-list">
<li>
<a href="https://github.com/Mitrais/microservices" class="externalLink" title="Github"><img class="imageLink" src="github" alt=""/>Github</a></li>
    </ul>
       <p class="menu-label">Overview</p>
    <ul class="menu-list">
<li>
<a href="./overview.html" title="Overview">Overview</a></li>
    </ul>
			  </div>
			  </div>
			  <div class="navbar-end">
			  	  <div class="navbar-brand">
				  					  </div>
			  </div>
		  </div>
	  </div>
  </nav>
  <!-- END BANNER -->
  <div class="main container">
	<div class="columns">
		<div class="column is-3">
			<aside class="menu is-hidden-mobile">
       <p class="menu-label">Documentation</p>
    <ul class="menu-list">
<li>
<a href="index.html" title="Overview">Overview</a></li>
<li>
<a class="is-active" href="#">Project Layout</a></li>
<li>
<a href="#" title="Non-Functional">Non-Functional</a>
      <ul class="menu-list">
<li>
<a href="configuration-service.html" title="Configuration Service">Configuration Service</a></li>
<li>
<a href="registry-service.html" title="Registry Service">Registry Service</a></li>
      </ul></li>
<li>
<a href="#" title="Functional">Functional</a>
      <ul class="menu-list">
<li>
<a href="product-service.html" title="Product Service">Product Service</a></li>
<li>
<a href="account-service.html" title="Account Service">Account Service</a></li>
      </ul></li>
<li>
<a href="./tests.html" title="Tests">Tests</a></li>
    </ul>
       <p class="menu-label">Info and reports</p>
    <ul class="menu-list">
<li>
<a href="./project-info.html" title="Info">Info</a></li>
<li>
<a href="./project-reports.html" title="Reports">Reports</a></li>
<li>
<a href="./apidocs/" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <p class="menu-label">Github</p>
    <ul class="menu-list">
<li>
<a href="https://github.com/Mitrais/microservices" class="externalLink" title="SCM">SCM</a></li>
<li>
<a href="https://github.com/Mitrais/microservices/issues" class="externalLink" title="Issues">Issues</a></li>
    </ul>
       <p class="menu-label">Mitrais</p>
    <ul class="menu-list">
<li>
<a href="https://www.mitrais.com" class="externalLink" title="Website">Website</a></li>
<li>
<a href="https://github.com/Mitrais" class="externalLink" title="Github">Github</a></li>
    </ul>
       <p class="menu-label">Icons</p>
    <ul class="menu-list">
<li>
<a href="https://github.com/Mitrais/microservices" class="externalLink" title="Github"><img class="imageLink" src="github" alt=""/>Github</a></li>
    </ul>
       <p class="menu-label">Overview</p>
    <ul class="menu-list">
<li>
<a href="./overview.html" title="Overview">Overview</a></li>
    </ul>
			</aside>
		</div>
		<div class="column is-9">
			<nav class="breadcrumb" aria-label="breadcrumbs">
<ul>
<li>
<a href="#" aria-current="page">Project Layout</a>
</li>
</ul>
			</nav>
			<article class="content"><h1>Project Layout</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://maven.apache.org">Apache Maven</a> is used to manage the project. Because the project contains
multiple services, its wise to used Maven
<a href="https://maven.apache.org/guides/mini/guide-multiple-modules.html">multi-modules</a> feature to logically
separate services from each others. Thus, will create an explicit boundaries between the
modules (services) to avoid using component which belongs to other services. Its a good practice to
implement <a href="https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)">encapsulation</a> as early
as possible forcing <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns (SOC)</a>
principle in project layout.</p>
</div>
<div class="paragraph">
<p><br/></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">microservice-project <i class="conum" data-value="1"></i><b>(1)</b>
├── functional <i class="conum" data-value="2"></i><b>(2)</b>
│   ├── account-service <i class="conum" data-value="3"></i><b>(3)</b>
│   │   ├── pom.xml
│   │   └── src
│   ├── authorization-service
│   │   ├── pom.xml
│   │   └── src
│   ├── order-service
│   │   ├── pom.xml
│   │   └── src
│   ├── pom.xml
│   └── product-service
│       ├── pom.xml
│       └── src
├── non-functional
│   ├── configuration-service
│   │   ├── pom.xml
│   │   └── src
│   ├── gateway-service
│   │   ├── pom.xml
│   │   └── src
│   ├── pom.xml
│   └── registry-service
│       ├── pom.xml
│       └── src
├── pom.xml</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Parent project</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Sub parent project e.g. (functional, non-functional)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Service project e.g. (account-service, gateway-service)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><br/></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maven support dependency inheritance, therefore any dependency defined in parent project will be
applied across modules.</p>
</div>
<div class="sect2">
<h3 id="parent_pom_microservice_project">Parent Pom (Microservice Project)</h3>
<div class="paragraph">
<p>Acts as a project aggregator and provides common dependencies across all modules.</p>
</div>
<div class="listingblock">
<div class="title">microservice-project/pom.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;
    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
&lt;/parent&gt;
&lt;properties&gt;
    &lt;spring-cloud.version&gt;Greenwich.M3&lt;/spring-cloud.version&gt;
&lt;/properties&gt;
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;!--
    Never write another getter or equals method again https://projectlombok.org/
    --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--
    Register and discover other services from Service Discovery
    --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--
    Provides application metrics information
    --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sub_parent_pom">Sub Parent Pom</h3>
<div class="paragraph">
<p>Acts similarly with the parent pom with some specific dependencies for different context.</p>
</div>
<div class="sect3">
<h4 id="functional_parent_pom">Functional Parent Pom</h4>
<div class="paragraph">
<p>All functional services will have its own database and uses JPA technology to provides data operation.
They will also provides a RESTful web services using spring-data-rest technology.</p>
</div>
<div class="listingblock">
<div class="title">microservice-project/funtional/pom.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;!-- Setup Spring Data REST Repository support --&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;!-- Setup Spring Data JPA Repository support --&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;!-- Setup QueryDSL support --&gt;
        &lt;groupId&gt;com.querydsl&lt;/groupId&gt;
        &lt;artifactId&gt;querydsl-jpa&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;!-- In-memory database for testing/demos --&gt;
        &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;
        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="non_functional_parent_pom">Non-Functional Parent Pom</h4>
<div class="paragraph">
<p>All non-functional service doesn&#8217;t provide features related directly with the business process.
Therefore no specific dependencies defined in the pom file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building_and_running">Building and Running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build the project, simply execute the following command <code>mvn clean install</code>. The command will
compile, run unit-tests if any, and create jar files for each services.</p>
</div>
<div class="paragraph">
<p>To run the service, go to each target directory of the service and execute the created jar file
<code>java -jar [service-name]-[version].jar</code> e.g. <code>java -jar configuration-service-0.0.0-SNAPSHOT.jar</code></p>
</div>
<div class="sect2">
<h3 id="docker_images">Docker Images</h3>
<div class="paragraph">
<p>To build the project as docker images, simply add <code>docker</code> profile as an extra parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">mvn clean install -P docker</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command above will create docker images with the following image name format
<code>mitraisosc/microservice/[ARTIFACT_ID]:[VERSION]</code>. Example for <code>configuration-service</code>, the created
docker image name is <code>mitraisosc/microservice/configuration-service:0.0.0-SNAPSHOT</code>.
Deployment as docker containerr is documented in <a href="docker-deployment.html">Docker Deployment</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Let&#8217;s start to look at each services starting with <a href="configuration-service.html">Configuration Service</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div></article>
		</div>
	</div>
  </div>
  <footer class="footer">
      <div class="container">
      <!-- FOOTER-->
		<div class="columns">
			<div class="column is-6">
	        	Copyright &#169;      2019 <a href="https://www.mitrais.com">Mitrais</a>.
All rights reserved.			</div>
			<div class="column is-6">
                <a href="https://maven.apache.org/"><img src="./images/maven-feather.png"/></a>
                <a href="https://bulma.io"><img src="./images/bulma-logo.png"/></a>
			</div>
		</div>
      </div>
   </footer>
   <script async type="text/javascript" src="./js/script.js"></script>
  </body>
</html>
